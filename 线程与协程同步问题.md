### 线程与协程同步问题

在线程内，任一时刻只有一个协程在运行；在单cpu内，任一时刻只有一个线程在运行。为什么线程是线程不安全，而协程是安全的呢？

- 在python中由于CIL的存在，任一时刻只能运行一个线程。但是由于线程是由操作系统的控制，线程的切换是不确定，人为控制的话可通过：sleep或io阻塞操作来切换线程。线程执行的原子操作是单字节码的操作，如a =1。而如a+=1的操作是多字节码的操作，而多字节码的操作就会造成线程不安全的问题。
- 协程是属于线程的一种微线程，由人为操作切换线程，而只有遇见io操作时才会切换协程，是可控的。

